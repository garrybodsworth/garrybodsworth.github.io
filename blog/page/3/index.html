
<!DOCTYPE HTML>
<html lang="en-gb">
<head>
  <meta charset="UTF-8">
  <title>Fragmented Memory</title>

  <meta name="author" content="Garry Bodsworth">
  
  <meta name="description" content="Linux at 20 Aug 26th, 2011 If it didn&#8217;t exist I somehow think computing would be a much less fun place and I probably wouldn&#8217;t be able &hellip;">
  
  

  <link rel="canonical" href="http://www.fragmentedmemory.com/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/feed/" rel="alternate" title="Fragmented Memory" type="application/atom+xml">
</head>
  
<body class="default">
  <div id="wrapper">
    <div id="header">
  <h1><a href="/">Fragmented Memory</a></h1>
  
    <p>Garry Bodsworth's Blog (formerly Garry's Bit Patterns &amp; Programmer's Log)</p>
  
</div>
<ul id="social-links">
  
    <li><a class="rss" href="/feed/" title="RSS">RSS</a></li>
  
  
  
  
    <li><a class="twitter" href="http://twitter.com/garrybodsworth" title="Twitter">Twitter</a></li>
  
  
    <li><a class="github" href="https://github.com/garrybodsworth" title="GitHub">GitHub</a></li>
  
  
  
  
  
  
    <li><a class="pinboard" href="https://pinboard.in/u:garrybodsworth" title="Pinboard">Pinboard</a></li>
  
</ul>
<div class="clear"></div>
<ul id="nav">
  
    <li> <a href="/" class="current">blog</a> </li>
  

  
    <li><a href="/blog/archives">archives</a></li>
  

  
    <li><a href="/about">about</a></li>
  
</ul>

    <div id="main"> 

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/08/26/linux-at-20/">Linux at 20</a>
    </h1>
  
  








  


<time datetime="2011-08-26T08:32:00+01:00" pubdate data-updated="true">Aug 26<span>th</span>, 2011</time>
</div>

<div class="post-content"><div class='post'>
If it didn&#8217;t exist I somehow think computing would be a much less fun place and I probably wouldn&#8217;t be able to do my job so well.<br /><br /><a href="http://www.linuxfoundation.org/20th/">Linux Foundation</a><br /><a href="http://www.linuxfoundation.org/ 20th" target="_blank"><img src="http://www.linuxfoundation.org/ 20th/images/lf_linux20_webbadge.png" width="300" height="250" alt="I'll be celebrating 20 years of Linux with The Linux Foundation!" border="0"></a></div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/08/24/pycon-uk-2011/">Pycon UK 2011</a>
    </h1>
  
  








  


<time datetime="2011-08-24T22:25:00+01:00" pubdate data-updated="true">Aug 24<span>th</span>, 2011</time>
</div>

<div class="post-content"><div class='post'>
Unfortunately I was unable to make it to EuroPython 2011 due to its location (no longer being in Birmingham).&nbsp; The good news is that the same guys who ran Europython in Birmingham have announced <a href="http://pyconuk.org/">Pycon UK</a> in Coventry.<br /><br />For the reasonable price of £95 you get two days of Python goodness.&nbsp; As their website says:<br /><blockquote>                     <br />Sessions will include testing, a code clinic,  Django, PyPy, XML, Design and Graphical Programming. There will be an  unscheduled room for dynamic talks and time allocated for sprints. The  weekend will also feature the return of our ever boisterous conference  dinner!</blockquote>I&#8217;ve paid for my ticket already and Python events are always educational and entertaining.</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/08/23/new-github-project-pyxlib-ctypes/">New Github Project - Pyxlib-ctypes</a>
    </h1>
  
  








  


<time datetime="2011-08-23T21:33:00+01:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2011</time>
</div>

<div class="post-content"><div class='post'>
I had written a pyrex based binding to some elements of Xlib, but I decided to make it pure python to avoid the compilation step.&nbsp; Luckily a kind person had created pyxlib-ctypes <a href="http://code.google.com/p/pyxlib-ctypes/">http://code.google.com/p/pyxlib-ctypes/</a> which is a pure Python binding to the underlying X functions.<br /><br />I needed a few more features due to XComposite for writing crazy desktop compositors in pure Python and also some XFixes functionality so we can really hide the mouse cursor.<br /><br />As such I am publishing my amendments to it on Github - you can check it out here: <a href="https://github.com/garrybodsworth/pyxlib-ctypes">https://github.com/garrybodsworth/pyxlib-ctypes</a> it literally has the bare minimum I needed and could probably be extended for greater coverage.&nbsp; It is used in production and seems to be working very happily.</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/08/23/resurrection/">Resurrection!</a>
    </h1>
  
  








  


<time datetime="2011-08-23T21:20:00+01:00" pubdate data-updated="true">Aug 23<span>rd</span>, 2011</time>
</div>

<div class="post-content"><div class='post'>
It&#8217;s aliiiiiive!<br /><br />After a few years of hosting my own blog on http://programmerslog.com I have come back to Blogger.&nbsp; This unfortunately was caused by losing the domain which is pretty sad&#8230;.&nbsp; I have a back up of the few hundred blog posts in a SQL dump but I doubt I will find the energy to extract them(!)<br /><br />What will be on this blog now?&nbsp; Any projects I publish on Github, lots of Python, Linux, coding, and probably my random artistic scribblings.<br /><br />I must say Blogger is looking rather swish nowadays, part of the reason to use Wordpress was for the features, but now I can do pretty much what I want here.&nbsp; Also I don&#8217;t have to worry about renewing my domain subscriptions or doing software updates&#8230;<br /><br />I&#8217;ve reconfigured all my feeds to point to this blog since it is the only active one.<br /> <br />Now I just have to actually write some content&#8230;</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/01/09/getting-more-battery-life-out-of-a-linux-laptop/">Getting More Battery Life Out of a Linux Laptop</a>
    </h1>
  
  








  


<time datetime="2011-01-09T00:00:00+00:00" pubdate data-updated="true">Jan 9<span>th</span>, 2011</time>
</div>

<div class="post-content"><p>On my ASUS UL20A out of the box power management is pretty good but it still does not reach the heady climbs of Windows.  In running [powertop][1] it gave a lot of useful suggestions like SATA, soundcard and USB, but when you apply these you only get it for that session.  You need some way of making these power saving settings permanent.</p>

<p>Here are a few power management scripts that have increased my battery life by about 20-40% as a rough estimate.  The best way to increase battery life dramatically is to reduce the brightness of your monitor which obviously diminishes the usefulness of your display at a certain point.</p>

<p>Here are the files you need to create (all derived from [this forum post][2]).</p>

<p><strong>vm_dirty_writeback</strong><br/>
`<br />
[sourcecode language=&ldquo;bash&rdquo;]<br /></p>

<h1>!/bin/sh</p></h1>

<p>path_dwc=&#8221;/proc/sys/vm/dirty_writeback_centisecs&#8221;<br />
val=500</p>


<p>case &#8220;$1&#8221; in<br />
    true)<br />
        echo &#8220;**VM dirty writeback 15 seconds&#8221;<br />
        val=1500<br />
        ;;<br />
    false)<br />
        echo &#8220;**VM dirty writeback 5 seconds&#8221;<br />
        val=500<br />
        ;;<br />
esac</p>


<p># 5 seconds on AC, 15 seconds on battery</p>


<p>if [ -w &#8220;$path_dwc&#8221; ] ; then<br />
    echo $val > $path_dwc<br />
fi</p>


<p>exit 0<br />
[/sourcecode]<br />
`

**link\_pm\_policy**  
`<br />
[sourcecode language=&#8221;bash&#8221;]<br />
#!/bin/sh</p>


<p>path_host0=&#8221;/sys/class/scsi_host/host0/link_power_management_policy&#8221;<br />
path_host1=&#8221;/sys/class/scsi_host/host1/link_power_management_policy&#8221;<br />
path_host2=&#8221;/sys/class/scsi_host/host2/link_power_management_policy&#8221;<br />
path_host3=&#8221;/sys/class/scsi_host/host3/link_power_management_policy&#8221;<br />
val=max_performance</p>


<p>case &#8220;$1&#8221; in<br />
    true)<br />
        echo &#8220;**lpm policy powersave ON&#8221;<br />
        val=min_power<br />
        ;;<br />
    false)<br />
        echo &#8220;**lpm policy powersave OFF&#8221;<br />
        val=max_performance<br />
        ;;<br />
esac</p>


<p># max_performance on AC min_power on battery</p>


<p>if [ -w &#8220;$path_host0&#8221; ] ; then<br />
    echo $val > $path_host0<br />
fi</p>


<p>if [ -w &#8220;$path_host1&#8221; ] ; then<br />
    echo $val > $path_host1<br />
fi</p>


<p>if [ -w &#8220;$path_host2&#8221; ] ; then<br />
    echo $val > $path_host2<br />
fi</p>


<p>if [ -w &#8220;$path_host3&#8221; ] ; then<br />
    echo $val > $path_host3<br />
fi</p>


<p>exit 0<br />
[/sourcecode]<br />
`

**snd_suspend**  
`<br />
[sourcecode language=&#8221;bash&#8221;]<br />
#!/bin/sh</p>


<p>path_dwc=&#8221;/sys/module/snd_hda_intel/parameters/power_save&#8221;<br />
val=1</p>


<p>case &#8220;$1&#8221; in<br />
    true)<br />
        echo &#8220;**Intel HD sound suspend&#8221;<br />
        val=1<br />
        ;;<br />
    false)<br />
        echo &#8220;**Intel HD sound on power&#8221;<br />
        val=0<br />
        ;;<br />
esac</p>


<p># 5 seconds on AC, 15 seconds on battery</p>


<p>if [ -w &#8220;$path_dwc&#8221; ] ; then<br />
    echo $val > $path_dwc<br />
fi</p>


<p>exit 0<br />
[/sourcecode]<br />
`

**network_powersave**  
`<br />
[sourcecode language=&#8221;bash&#8221;]<br />
#!/bin/sh</p>


<p>if [ &#8220;$1&#8221; = &#8220;true&#8221; ]; then<br />
            iwconfig wlan0 power on<br />
fi</p>


<p>if [ &#8220;$1&#8221; = &#8220;false&#8221; ]; then<br />
            iwconfig wlan0 power off<br />
fi</p>


<p>exit 0<br />
[/sourcecode]<br />
`

**usb_autosuspend**  
`<br />
[sourcecode language=&#8221;bash&#8221;]<br />
#!/bin/bash<br />
if [ &#8220;$1&#8221; = &#8220;true&#8221; ]; then</p>


<p>  for i in /sys/bus/usb/devices/*/power/level; do<br />
    [ &#8220;$(cat $i)&#8221; = &#8220;auto&#8221; ] && continue<br />
    echo &#8220;auto&#8221; > $i<br />
  done</p>


<p>  for i in /sys/bus/usb/devices/*/power/autosuspend; do<br />
    [ &#8220;$(cat $i)&#8221; -ge 0 2>/dev/null ] && continue<br />
    echo &#8220;2&#8221; > $i<br />
  done</p>


<p><p>fi<br />
[/sourcecode]<br />
`</p>

<p>Then do:</p>

<ul>
<li>Put all the files above in a directory and cd into it.</li>
<li>chmod 755 *</li>
<li>sudo install * /usr/lib/pm-utils/power.d/</li>
<li>Do a reboot here.</li>
</ul>


<p>You can check how it is running by looking at the log in /var/log/pm-powersave.log</p>

<p> [1]: <a href="http://www.lesswatts.org/projects/powertop/">http://www.lesswatts.org/projects/powertop/</a>
 [2]: <a href="http://ubuntuforums.org/showthread.php?t=1326333">http://ubuntuforums.org/showthread.php?t=1326333</a></p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2011/01/09/asus-ul20a-hints-and-tips-for-running-linux/">Asus UL20A &#8211; Hints and Tips for Running Linux</a>
    </h1>
  
  








  


<time datetime="2011-01-09T00:00:00+00:00" pubdate data-updated="true">Jan 9<span>th</span>, 2011</time>
</div>

<div class="post-content"><p>My MacBook Pro developed the <a href="http://support.apple.com/kb/TS2377">nVidia graphics failure problem</a> and I got the motherboard replaced, it has never been the same since and when I asked I basically had no warranty for it. So after three-and-a-half years I decided to buy myself a new laptop. Lacking the riches required for another Apple I decided to go where I am really most comfortable &#8211; Linux. So after a lot of research and fingers crossing I picked up an <a href="http://www.amazon.com/UL20A-A1-Light-12-1-Inch-Silver-Laptop/dp/B002PAQXAE">Asus UL20A</a> off of eBay for 318 quid including postage.</p>

<p>The specs are as follows:</p>

<ul>
<li>Core2Duo SU7300 (dual core 1.3GHz)</li>
<li>12 inch display at 1366&#215;768</li>
<li>Quoting something like 8 hours battery life.</li>
<li>4GB RAM (upgraded by me for 25 quid)</li>
<li>60GB solid state drive (upgraded by me for 95 quid) &#8211; an OCZ Vertex 2E with the respected Sandisk controller.</li>
</ul>


<p>The point of this post, however, is not to review a piece of hardware, but to get Linux working flawlessly on it.</p>

<p><strong>Linux Mint 10</strong></p>

<p>I decided to use<a href="http://www.linuxmint.com/"> Linux Mint 10</a> (Ubuntu base), this is instead of stock Ubuntu which I find very cluttered on initial install and also requires me to do loads of fiddling to get a normal looking and clean desktop environment.  Linux Mint 10 is based on the latest Ubuntu but presents the user a very nicely set up session after the first install.  The desktop is uncluttered, there is only one panel at the bottom, and theme is head and shoulders above the Ubuntu default.</p>

<p>Linux Mint does have a Debian based edition which I will switch to later but the packages are a lot further behind the latest Ubuntu and since I was going to use some more modern features for the SSD I would have to have done a lot more hacking.</p>

<p><strong>Installing</strong></p>

<p>I partitioned the SSD the following way:</p>

<ul>
<li>256MB ext2 /boot partition</li>
<li>4.1GB /swap partition</li>
<li>15GB btrfs / partition</li>
<li>40GB btrfs /home partition</li>
</ul>


<p>I decided to use btrfs because it is the latest and greatest available file system for Linux.  This means it has things like TRIM support for SSDs and can do cool stuff like snapshots, but this also requires a newer kernel for better support hence not using the Linux Mint Debian Edition.</p>

<p>The ext2 boot partition is required as you can&#8217;t boot directly from btrfs according to the information I found out there.  The swap partition is memory + 100MB for supporting hibernate.  The main partition is separate from the home partition &#8211; <strong>this is very important when you use Ubuntu</strong>.  Because Ubuntu does releases every six months you can attempt upgrades, but I have seen and experienced this failing with catastrophic consequences.  Luckily having a separate home partition means you can tell Ubuntu to reinstall to the main partition but just mount and use you home directory without formatting it.</p>

<p>Installation took me about 10-15 minutes before I was there in my freshly installed desktop.  Now, almost everything works straight out of the box, it is case of tweaking to get some of the more hidden features working.</p>

<p><strong>Two Finger Scrolling</strong></p>

<p>Two finger scrolling on the Synaptics touchpad requires a little bit of tweaking.   Create a file called /usr/share/X11/xorg.conf.d/50-twofingerscroll.conf with the folling contents:<br/>
<code>&lt;br /&gt;
Section "InputClass"&lt;br /&gt;
Identifier "touchpad catchall"&lt;br /&gt;
MatchProduct "SynPS/2 Synaptics TouchPad"&lt;br /&gt;
Option "VertTwoFingerScroll" "on"&lt;br /&gt;
Option "HorizTwoFingerScroll" "on"&lt;br /&gt;
Option "EmulateTwoFingerMinW" "5"&lt;br /&gt;
Option "EmulateTwoFingerMinZ" "48"&lt;br /&gt;
EndSection</code></p>

<p>Then start up<em> gconf-editor</em> and change<em> /desktop/gnome/peripherals/touchpad/scroll_method</em> to the value <em>2</em>.</p>

<p>Now you have two finger scrolling working and also two finger right click!</p>

<p><strong>The LCD Brightness Keys</strong></p>

<p>This requires a small change to your boot settings so that you can use the function keys to set the screen brightness.</p>

<p>Edit <em>/etc/default/grub</em> so that the line with <em>GRUB_CMDLINE_LINUX = &#8220;&#8221;</em> says:<br/>
<code>&lt;br /&gt;
GRUB_CMDLINE_LINUX="acpi_backlight=vendor"</code></p>

<p>Then run <em>sudo update-grub </em>and reboot.</p>

<p><strong>Power Settings</strong></p>

<p>To help improve battery life install powertop by using <em>sudo apt-get install powertop</em> then run <em>sudo powertop</em> and follow its instructions.  You should be able to help squeeze precious minutes out of your battery.</p>

<p><strong>Mistakes</strong></p>

<p>I did attempt installing the latest kernel along with the latest graphics drivers.  This was mainly for graphical hacking and trying out newer btrfs options.  This is a big mistake.  For a start the battery monitoring stops working although I managed to solve that, then shutdown stopped working consistently.  So for all the benefits don&#8217;t bother if you prefer your system to be properly functioning.</p>

<p><strong>What I Did Next&#8230;.</strong></p>

<p>I always use <a href="http://ubuntu-tweak.com/">Ubuntu Tweak</a> and it works on Linux Mint 10.  This allows you to get some more interesting packages and also update to cutting edge versions.</p>

<p>There is something I don&#8217;t like about Google Chrome despite its super-speed, so I always go back to Firefox.  Unfortunately distros currently use 3.6 but I have been using 4.0 for about six months, it is much quicker, better looking and more robust.  Through Ubuntu Tweak enable the Minefield repositories and get it.  Also install the Nightly Tools Addon to help get your Addons all working.</p>

<p>I install ttf-droid fonts normally and switch all my desktop to use that as it gives more space, but for people who don&#8217;t like small fonts you probably should avoid it.</p>

<p>I have also installed and am running the theme from the <a href="http://www.elementary-project.com/">elementary project</a> which gives a less Minty user interface for Linux Mint.  It&#8217;s purely aesthetical, although the elementary Nautilus file browser is much better than the default.</p>

<p><strong>All In All</strong></p>

<p>At the end of it I have a fully working Linux laptop that boots in less than 20 seconds and shuts down in about a second.  It is easy to use and responsive which makes me really happy.  From what I have been trying to work out the ASUS laptops seem to have fairly decent Linux support.</p>

<p>Next up I am going to have to get hacking on <a href="http://www.libimobiledevice.org/">libimobiledevice</a> because I have an iPhone and I would like to avoid running updates via a virtual machine or something.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2010/08/12/python-is-beautifully-over-engineered/">Python Is Beautifully Over-engineered</a>
    </h1>
  
  








  


<time datetime="2010-08-12T00:00:00+01:00" pubdate data-updated="true">Aug 12<span>th</span>, 2010</time>
</div>

<div class="post-content"><p>I could have called this &#8220;Don&#8217;t re-invent the wheel&#8221;. Sometimes the Python standard library really surprises me because some bits are very over-engineered, but in a really good way. First time I realised this was when I was working on what became <a href="http://github.com/garrybodsworth/coda_network">coda_network</a> as most people solving the proxy problem and other downloading issues just write a new network library, but there are some really handy base classes to derive from to solve it. Admittedly it did require some bug fixing along the way, but it was kind of worthwhile.</p>

<p>In coda_network I&#8217;ve got a mini proxy using ForkingMixin to do a process per download bypassing a lot of GIL based multithreading pain. I needed some more multi processing support for some shared state and possibly locking. So I started trying to do a MultiprocessingMixIn for the SocketServer/TCPServer/BaseHTTPServer. I thought &#8220;this is easy just rip off the threading one since they share the same interface&#8221;. That worked really well for general use but when I started putting the system under severe load the process cleanup started going wonky.</p>

<p>Eventually I think I got it working using this code:</p>

<pre lang="PYTHON" line="1" file="MultiProcessingMixin.py" colla="+">class MultiprocessingMixIn:
    """Mix-in class to handle each request in a new process."""

    # Decides how process will act upon termination of the
    # main process
    daemon_processes = False

    def process_request_process(self, request, client_address):
        """
        Same as in BaseServer but as a thread.
        In addition, exception handling is done here.
        """
        try:
            # Actually do the request
            self.finish_request(request, client_address)
        except:
            # XXX: will this work with multiprocessing correctly?
            self.handle_error(request, client_address)
        finally:
            # Close the socket request
            self.close_request(request)

    def process_request(self, request, client_address):
        """Start a new thread to process the request."""
        t = multiprocessing.Process(target = self.process_request_process,
                             args=(request, client_address))
        if self.daemon_processes:
            t.daemon = True
        t.start()
        # Now we close the parent request socket because the child process
        # is now responsible for it
        self.close_request(request)
</pre>


<p>The important bit is closing the request in the parent after the child process has started since it takes responsibility for it then.</p>

<pre lang="PYTHON" line="1" colla="+">class ProxyServer(MultiprocessingMixIn, BaseHTTPServer.HTTPServer):
    pass

proxy = ProxyServer(address, HttpResponder)
proxy.serve_forever()
</pre>


<p>I&#8217;ve probably missed a couple of bits (like making sure the handle_error does what is expected) but this is at least a good starting point&#8230;.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2010/08/03/a-coda_network-update/">A Coda_network Update</a>
    </h1>
  
  








  


<time datetime="2010-08-03T00:00:00+01:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2010</time>
</div>

<div class="post-content"><p>I have been making a slow trickle of commits to <a href="http://github.com/garrybodsworth/coda_network">coda_network</a> as I need various features. The httplib.py and urllib2.py have been used in the field for a while in a variety of networks and I am pleased with how it has gone (now that means I need to get these changes upstream when I have a chance).</p>

<p>So what changes have gone in?<br/>
* A skeletal mock proxy server that can fake HTTP and HTTPS requests. This will perform the basis of unit testing.<br/>
* Fix a bit where TCP keepalive failed to happen over HTTPS.<br/>
* Implemented MD5-sess digest authentication which seems to be what IIS Windows servers use.<br/>
* Added an authentication handler for OAuth.</p>

<p>The authentication handler for OAuth was the most work. Essentially I had to extract the OAuth logic from <a href="http://github.com/simplegeo/python-oauth2">oauth2</a> and remove all the close coupling with httplib. This then means you can have an OAuth handler in the urllib2 world of Python and do it through proxies and the suchlike. Your server does need to return a 401 rather than the ones I have seen that get a 500 internal server error when the request is made without authorisation.</p>

<p>To get it working I cheated and reused username and password because they have little meaning in the OAuth world. So you end up with something like this (you can skip the token part if you don&#8217;t have it yet):<br/>
`<br /></p>

<pre><code>password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()&lt;br /&gt;
password_mgr.add_password(None,&lt;br /&gt;
                          'http://oauthprotected.com',&lt;br /&gt;
                          KeySecret('consumer_key', 'consumer_secret'),&lt;br /&gt;
                          KeySecret('token', 'token_secret'),&lt;br /&gt;
                          )&lt;br /&gt;
auth_handler = oauth_auth.HTTPOauthAuthHandler(password_mgr)&lt;br /&gt;
</code></pre>

<p>`</p>

<p>It is all done entirely in HTTP headers and there is no option for GET or POST parameters.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2010/08/02/how-not-to-write-notes-at-europython-2010/">How (Not to) Write Notes at Europython 2010</a>
    </h1>
  
  








  


<time datetime="2010-08-02T00:00:00+01:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2010</time>
</div>

<div class="post-content"><p>I was told my write-up of Europython was useless without seeing the actual pictures I was drawing when I should have been writing more notes&#8230;. I wasn&#8217;t necessarily bored, just bitten by the drawing bug once again.</p>

<p>First up I started with a simple Optimus Prime to pass the time.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854492950/" title="Europython notes page 1 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4116/4854492950_8742ed17cc.jpg" width="500" height="374" alt="Europython notes page 1" /></a></p>

<p>Then Optimus Prime needed someone to fight, so Megatron popped in.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854526694/" title="Europython notes page 2 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4118/4854526694_3eb8316d50.jpg" width="500" height="374" alt="Europython notes page 2" /></a></p>

<p>But Megatron was upgraded into the insane killing machine of Galvatron.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4853912621/" title="Europython notes page 3 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4075/4853912621_87b798271d.jpg" width="500" height="374" alt="Europython notes page 3" /></a></p>

<p>Hot Rod (for some reason channelling David Bowie) is needed to keep Galvatron in check.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4853917113/" title="Europython notes page 4 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4102/4853917113_983454eb10.jpg" width="500" height="374" alt="Europython notes page 4" /></a></p>

<p>The chaos bringer Unicron keeps a close eye on testing in planet form.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854541782/" title="Europython notes page 5 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4101/4854541782_669a1cd004.jpg" width="500" height="374" alt="Europython notes page 5" /></a></p>

<p>A tough looking Iron Man decided to get in on the act.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854547700/" title="Europython notes page 6 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4137/4854547700_93a280ab95.jpg" width="500" height="374" alt="Europython notes page 6" /></a></p>

<p>Then we go back to a slightly better rendered Optimus Prime.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854554072/" title="Europython notes page 7 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4136/4854554072_afeee41d80.jpg" width="500" height="374" alt="Europython notes page 7" /></a></p>

<p>A childhood creation of an old friend is Thunder Supreme &#8211; the city robot.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854560034/" title="Europython notes page 8 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4076/4854560034_df16aaa00f.jpg" width="500" height="374" alt="Europython notes page 8" /></a></p>

<p>Robocop helps organise a Python Code Dojo.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4853952247/" title="Europython notes page 10 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4093/4853952247_4b48eeb888.jpg" width="500" height="374" alt="Europython notes page 10" /></a></p>

<p>Judge Dredd pronounces sentence on Twisted.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4853957873/" title="Europython notes page 11 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4137/4853957873_2606e15a56.jpg" width="500" height="374" alt="Europython notes page 11" /></a></p>

<p>Death&#8217;s Head slightly sketchy, yes?<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4854581470/" title="Europython notes page 12 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4095/4854581470_b9d49739fe.jpg" width="500" height="374" alt="Europython notes page 12" /></a></p>

<p>Death&#8217;s Head II was fighting at keeping Windows at bay. But I fear he may not be powerful enough.<br/>
<a href="http://www.flickr.com/photos/garrybodsworth/4853968351/" title="Europython notes page 13 by Garry Bodsworth, on Flickr"><img src="http://farm5.static.flickr.com/4076/4853968351_89285358dd.jpg" width="500" height="374" alt="Europython notes page 13" /></a></p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2010/08/01/europython-2010/">EuroPython 2010</a>
    </h1>
  
  








  


<time datetime="2010-08-01T00:00:00+01:00" pubdate data-updated="true">Aug 1<span>st</span>, 2010</time>
</div>

<div class="post-content"><p>Last week I attended EuroPython 2010 without contracting food poisoning like last year. It was four days of talks, food and beer. Before I completely forget everything I thought I&#8217;d write up my experience. This is the last year in Birmingham and next year it heads to Florence but PyCon UK will carrying on.</p>

<p>I also did not only end up sketching such luminaries as Optimus Prime, Megatron, Robocop, Death&#8217;s Head (1 and 2), and Judge Dredd, I actually took some notes as well(!)</p>

<p>This write up has taken me a few weeks since my iPhone4 died completely then my Macbook Pro decided to contract the nvidia graphics chip of death.</p>

<p><strong>Russel Winder &#8211; The Multicore Revolution</strong><br/>
The everything you&#8217;ve held true all this time is going to change speech. Russel was thoroughly entertaining as usual especially with the sidetrack into physics. He stepped in at the last minute for someone dropping out going to OSCON or something, but if they hadn&#8217;t said noone would have known or complained.</p>

<p><a href="http://wiki.europython.eu/Talks/Idiomatic%20Python">Idiomatic Python/Python Tips and Tricks</a><br/>
This was the talk of the conference (there was a second part later I unfortunately missed because it overran). Basically everyone in the audience no matter how expert they were in Python will have learnt something. It rattled through at great pace. Stuff I learnt included:<br/>
Copying a sequence c = s[:]<br/>
Delete a sequence s[:] = [] or del s[:]<br/>
Iterating an array using enumerate() means you get a pair of index, value<br/>
Iterating multiple sequences with zip() means you keep the arrays in lockstep<br/>
You can do a for &ndash;> else</p>

<p><a href="http://wiki.europython.eu/Talks/The%20Development%20Process%20Of%20Python">Python Development Process</a><br/>
I simply had to go to this because now I am thinking about the process to merge my changes I have made in <a href="http://github.com/garrybodsworth/coda_network">coda_network</a> back upstream since they seem to be working quite nicely now.</p>

<p>The branches are:<br/>
3.2 &#8211; branches/py3k<br/>
3.1 &#8211; release31-maint<br/>
2.7 &#8211; release27-maint<br/>
2.6 &#8211; release26-maint</p>

<p>To do an update and compile of the source do ./configure &amp;&amp; make<br/>
Or you can do a debug version by ./configure &#8211;with-pydebug &amp;&amp; make<br/>
And you only need make if the C files have changed.</p>

<p>Writing tests is extremely important, so write them check they fail, fix the problem and re-run the tests to make them work! You should run your tests with Lib/Test/regrtest.py</p>

<p>To run all tests do ./python -m test.regrtest -uall and to do a specific test replace uall with the test name.</p>

<p>Apparently there is a maintainers file under Misc/maintainers.rst which should be very useful.</p>

<p><a href="http://wiki.europython.eu/Talks/How%20Import%20Works">How Import Works</a><br/>
I went to this because it can never hurt to know what is going on int he background. It covered some of the new functionality including relative imports which you can get at on older versions by doing &#8220;from __future__ import absolute_import&#8221; then you can do funky stuff like &#8220;from ..spam import flying_circus&#8221;.</p>

<p>So the process of doing import:</p>

<ul>
<li>Resolve the name.</li>
<li>Find the module, it is possible to create custom finders that can drag your package from anywhere like the internet.</li>
<li>Then do a loader.load_module(fullname) and you&#8217;ve got it.</li>
</ul>


<p>They are putting in a __pycache__ where all the .pyc files go so you can use multiple interpreters without conflicting .pyc files and also they don&#8217;t get left around on your hard drive because they are all in one place. It helps prevent having stale .pyc files that can be accidentally imported.</p>

<p><strong>Cross Platform SIG</strong><br/>
This was an impromptu talk because there were quite a few drop-outs for talks. I decided to go because I feel Windows stalking me at every turn and I can only run away for so long.</p>

<p>The most interesting part was reimplementing UNIX commands in Python for some self contained non-administrator helpful commands.</p>

<p>Also mentioned was <a href="http://sphinx.pocoo.org/">Sphinx</a> for generated Python documentation and <a href="http://github.com/mxcl/homebrew">Homebrew</a> for Mac OSX to get a slightly better dev environment.</p>

<p><a href="http://wiki.europython.eu/Talks/Testing%20Http%20Apps%20With%20Python3">Monstrum &#8211; Python HTTP testing in Python 3</a><br/>
Seems to be testing by using HTTP headers.</p>

<p><a href="http://wiki.europython.eu/Talks/Porting%20To%20Python%203">Porting Python 2 to 3</a><br/>
One thing I wrote on my notepad was &#8220;Hiding to nothing&#8221;. I seem to remember thinking it requires a lot of effort and the ideal solution could conceivably be the most work which is a codebase that works in 2 and 3.</p>

<p><a href="http://wiki.europython.eu/Talks/Muddle%20Inventing%20A%20Build%20System">MUDDLE &#8211; A Build System</a><br/>
Muddle is a build system for building embedded systems written in Python. Considering my day job I could not miss out on this one since it is very relevant. It supports lots of VCS, and build systems (make, linux kernel, apt-get, initscript, version files, debian files). Basically, I need to find the time to really experiment with this and attempt to build a system.</p>

<p><a href="http://wiki.europython.eu/Talks/Kbus%20A%20Simple%20Messaging%20System">KBUS &#8211; A simple messaging system</a><br/>
This is a messaging system using a Linux kernel module. It is modelled on a socket model which is really easy to wrap your head around. The testing is all done in Python which makes it really powerful to use. It is definitely worth considering over dbus as that is really incredibly painful. I know some uses for this already myself after the pain of dbus and dbus-python.</p>

<p><strong>Open Standards &#8211; Democratising The Web</strong><br/>
Bruce Lawson from Opera had the keynote about open standards on the web. He gave this <a href="http://www.brucelawson.co.uk/2006/pas-78-guide-to-good-practice-in-commissioning-accessible-websites/">interesting link</a> about accessibility. He also mentioned the media queries for CSS to layout your content from different resolution screens and physically shaped devices. Also he mentioned <a href="http://www.html5patch.org/">html5patch</a> for cross browser html5.</p>

<p><a href="http://wiki.europython.eu/Talks/A%20Case%20For%20Accessibility">A Case For Accessibility</a><br/>
This is a subject close to my heart so there was no way I was going to miss this. They designed <a href="http://getmediacore.com/">Mediacore</a> with accessibility in mind.</p>

<p>The W3C says 10% population in most countries has a disability and the average age of the population is increasing such that the rate will get higher. They found actually seeing people with disabilities attempting to use the web through screenreaders and the suchlike made them see how hostile the web is (I am looking at you Tescos after your redesign, but that is a whole other article).</p>

<p>Things you should be thinking about are:<br/>
Order of menu items and in fact number of menu items.<br/>
Alt text for images &#8211; people still don&#8217;t do this!<br/>
Form labels<br/>
Tab order<br/>
Headlines and paragraphs are semantic and help<br/>
Hiding things right. display:none does not necessarily work with screen readers.</p>

<p>Some accessibility guidelines are available <a href="http://northtemple.com/1608">here</a>.</p>

<p>And something even closer to my heart, reduce or eliminate Adobe Flash completely.</p>

<p>It is also easy to partner with a visual disability centre, like for instance the RNIB or Sense. There is also some Non Visual Accessibility web certification.</p>

<p><a href="http://wiki.europython.eu/Talks/Html5%20The%20Good%20The%20Bad%20And%20The%20Quite%20Interesting">HTML5: the good, the bad and the quite interesting</a><br/>
And this talk was really quite interesting. Just talking about the new things that are getting added to the HTML standard (the title is really honestly for marketing).</p>

<p>You&#8217;ve got new things like a header element that can go anywhere, and a nav element to contain say a group of links. You can tag something article which is a discrete piece of content. There is now a time element to unambiguously mark something as a time and date.</p>

<p>Interestingly (although Opera is the only browser implementing it right now) is form validation so you can have HTML smart forms which flag up to the user when something needs attention.</p>

<p><strong>First Round Of Lightning Talks</strong><br/>
There was the face tracking robot called Hedroid that delighted the audience. We had a talk about how the mobile interface for the schedule was knocked up in a pub and deployed in about an hour. There was the pyweek game development challenge. The online pygame book. And a few more.</p>

<p><a href="http://wiki.europython.eu/Talks/Python%20And%20Windows%20Equality">Python On Windows</a><br/>
Just to see how Python is getting on in the world of Windows and what real world stuff people are doing with it. CPython from the standard installer seems to work well for most people and there are a few useful packages like active_directory, wmi, and pywin32.</p>

<p><a href="http://wiki.europython.eu/Talks/Python%20In%20The%20Browser">Python In The Browser</a><br/>
This is web programming using Silverlight + ironPython. It&#8217;s an interesting thing to see and looks like it could make Windows development more palatable. There is a really good demo <a href="http://www.trypython.org/">here</a> for the Python tutorial code executed in the browser. The useful addresses are gestalt.ironpython.net/dlr_runtime.js to get python in the browser using Gestalt and silverlight.codeplex.com for the Silverlight Toolkit.</p>

<p>Like I say I see Windows stalking me in dark alleys&#8230;.</p>

<p>The State Of Python<br/>
Another day, another keynote. Interesting bits from the talk included <a href="http://badassjs.com/post/745778955/skulpt-python-implementation-in-javascript">Skulpt</a> which is an implementation of Python in Javascript. Also there was <a href="http://hackage.haskell.org/package/berp-0.0.1">Berp</a> which is Python 3 in Haskell that compiles down to Haskell. Also a mention was made of <a href="http://pypi.python.org/pypi/distribute">distribute and pip</a> which should help with the minefield of deployment.</p>

<p><a href="http://wiki.europython.eu/Talks/Organise%20A%20Python%20Code%20Dojo">Organise a Python Dojo</a><br/>
An entertaining talk about how the London Coding Dojos started with a strict <a href="http://codingdojo.org/">adherence to the rules</a> and how they evolved into what they are now. They have things like multi-week projects divided into small units (like a text adventure game). I think what I really took away is start with the default arrangement then find what works with the type of people.</p>

<p><a href="http://wiki.europython.eu/Talks/Adapting%20Libraries%20To%20Twisted">Twistify Your Library</a><br/>
And<br/>
<a href="http://wiki.europython.eu/Talks/Deferred%20Gratification">Deferred Gratification</a><br/>
I think I sat in these because I lacked the ability to stand up and it was nice and air conditioned. What I really learnt is Twisted deserves its name and it is implemented in completely the wrong language. My sketch involved Judge Dredd declaring &#8220;Guilty! The sentence is death!&#8221;</p>

<p><a href="http://wiki.europython.eu/Talks/The%20Guardian%20Api%201%20Year%20On">The Guardian API One Year On</a><br/>
This was about the kind of things the Guardian API is now capable of and how it is the antithesis of the newly implemented Murdoch Paywall. The first example was an online version of the paper which can be viewed <a href="http://guardian.gyford.com/">here</a> and there was the <a href="http://www.guardian.co.uk/zeitgeist">zeitgeist example</a>. Basically there are <a href="http://guardian.mashery.com/">three levels</a>, keyless for simple access, approved to get at the actual data, and bespoke for full access with no ads. They have also opened up a large variety of data in the <a href="http://www.guardian.co.uk/news/datablog">Guardian Datablog</a>.</p>

<p><a href="http://wiki.europython.eu/Talks/Gevent%20Network%20Library">gevent library</a><br/>
This is a library for large multithreaded programs. It is a lot more sensible than Twisted and fits into the Python semantics a lot better. It still needs a lot of work for various other python features like subprocesses.</p>

<p><strong>More Lightning Talks</strong><br/>
I did a talk about <a href="http://github.com/garrybodsworth/coda_network">coda_network</a> and fixing up httplib and urllib2.</p>

<p>There was a quick one about <a href="http://bit.ly/__main__">__main__.py</a> which was really interesting because you can do all kinds of packaging like adding all the files to a ZIP and making it work. Creating a __main__.py means you can execute a Python library which is really cool.</p>

<p>There was a talk that mentioned all kinds of hackery you can do with the with statement. One library is <a href="http://pypi.python.org/pypi/withhacks">withhacks</a>.</p>

<p>There was a really cool demo of pdb++ a new funky python debugger. I think the repository is <a href="http://github.com/antocuni/pdbpp">here</a>.</p>

<p>I&#8217;ve skipped some bits of Europython because I simply had Python overload and I am sure important stuff got pushed out of my brain.</p>
</div>
 </div>


<div id="pagination">
  
    <a class="prev" href="/blog/page/4/">&laquo;Previous</a>
  
  
    <a class="next" href="/blog/page/2/">Next&raquo;</a>
  
</div>
 </div>
    <div id="footer">
  <div class="panels">
    <div class="license">
      <h2>License</h2>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
    </div>

    <div class="posts">
      <h2>Recent Posts</h2>
      <ul>
        
          <li>
            <a href="/blog/2013/06/22/rss-feed-moved-to-http-slash-slash-www-dot-fragmentedmemory-dot-com-slash-feed-slash/">RSS Feed Moved To http://www.fragmentedmemory.com/feed/</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/18/new-location-and-new-blog-engine-and-old-content-restored/">New Location &amp; New Blog Engine &amp; Old Content Restored</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/joining-microsoft/">Joining Microsoft</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/leaving-bromium/">Leaving Bromium</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/05/philip-su-engineering-process-and/">Philip Su - Engineering Process And Philosophy At Facebook</a>
          </li>
        
      </ul>
    </div>
  </div>

  <p class="powered">
    Powered by <a href="http://octopress.org">Octopress</a> and <a href="https://github.com/iwinux/compbits">Compbits</a>
  </p>
</div>

  </div> <!-- #wrapper end -->

  

  


  

  

  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
