
<!DOCTYPE HTML>
<html lang="en-gb">
<head>
  <meta charset="UTF-8">
  <title>Fragmented Memory</title>

  <meta name="author" content="Garry Bodsworth">
  
  <meta name="description" content="How to Install the Latest Intel Drivers on Ubuntu Jun 20th, 2009 This is a fairly painless process to get the latest and greatest drivers for Intel &hellip;">
  
  

  <link rel="canonical" href="http://www.fragmentedmemory.com/blog/page/7">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Fragmented Memory" type="application/atom+xml">
</head>
  
<body class="default">
  <div id="wrapper">
    <div id="header">
  <h1><a href="/">Fragmented Memory</a></h1>
  
    <p>Garry Bodsworth's Blog (formerly Garry's Bit Patterns &amp; Programmer's Log)</p>
  
</div>
<ul id="social-links">
  
    <li><a class="rss" href="/atom.xml" title="RSS">RSS</a></li>
  
  
  
  
    <li><a class="twitter" href="http://twitter.com/garrybodsworth" title="Twitter">Twitter</a></li>
  
  
    <li><a class="github" href="https://github.com/garrybodsworth" title="GitHub">GitHub</a></li>
  
  
  
  
  
  
    <li><a class="pinboard" href="https://pinboard.in/u:garrybodsworth" title="Pinboard">Pinboard</a></li>
  
</ul>
<div class="clear"></div>
<ul id="nav">
  
    <li> <a href="/" class="current">blog</a> </li>
  

  
    <li><a href="/blog/archives">archives</a></li>
  

  
    <li><a href="/about">about</a></li>
  
</ul>

    <div id="main"> 

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/20/how-to-install-the-latest-intel-drivers-on-ubuntu/">How to Install the Latest Intel Drivers on Ubuntu</a>
    </h1>
  
  








  


<time datetime="2009-06-20T00:00:00+01:00" pubdate data-updated="true">Jun 20<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>This is a fairly painless process to get the latest and greatest drivers for Intel integrated graphics (like the 945GM). Since it is on the more or less bleeding edge of development there can be some issues, but personally I tend to see more issues with outdated drivers than running the latest.</p>

<p>There reason that this process is so simple on Ubuntu is that some nice and clever people have packaged it all up on <a href="https://launchpad.net/~xorg-edgers">xorg-edgers</a>. The instructions here are for Ubuntu Jaunty 9.04.</p>

<p>There are some commandline incantations to make and some text files to edit.</p>

<p>Create a file <strong>/etc/apt/sources.list.d/xorg-edgers.list</strong> that contains the following text:<pre lang=”Bash”> deb <a href="http://ppa.launchpad.net/xorg-edgers/ppa/ubuntu">http://ppa.launchpad.net/xorg-edgers/ppa/ubuntu</a> jaunty main deb-src <a href="http://ppa.launchpad.net/xorg-edgers/ppa/ubuntu">http://ppa.launchpad.net/xorg-edgers/ppa/ubuntu</a> jaunty main </pre></p>

<p>Now execute the following commands:<pre lang=”Bash” line=”1″ file=”update.sh” colla=”+”> sudo apt-key adv &mdash;recv-keys &mdash;keyserver keyserver.ubuntu.com 0x165d673674a995b3e64bf0cf4f191a5a8844c542 sudo apt-get update sudo apt-get upgrade </pre></p>

<p>Now you should have pulled in the latest Intel drivers and related dependencies. You might have also updated other packages on your system if you are not fully up to date with your software &#8211; don&#8217;t worry this should be fine. If you reboot now your system should use these latest drivers with some spiffing UXA acceleration&#8230;. but that is not all.</p>

<p>There are some stability issues if you are using a 945 based card, so you need some minor configuration changes. Run the following commandline:<pre lang=”Bash”> dpkg-reconfigure xserver-xorg </pre></p>

<p>Now you need to edit your <strong>/etc/X11/xorg.conf</strong> and edit the device section so it looks a bit like this:<pre lang=”Bash” file="part-xorg.conf"> Section &ldquo;Device&rdquo; Identifier &ldquo;Configured Video Device&rdquo; Driver &ldquo;intel&rdquo; Option &ldquo;Tiling&rdquo; &ldquo;false&rdquo; Option &ldquo;FramebufferCompression&rdquo; &ldquo;False&rdquo; EndSection </pre></p>

<p>The most important part is to get those two lines containing &#8220;Option&#8221; which fixes the problems.</p>

<p>If you are using stock Jaunty then you will not have Kernel Mode Setting which provides better mode detection and switching for Linux. This requires a new kernel, but I will blog about that tomorrow.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/20/clutter-0-9-4-released/">Clutter 0.9.4 Released</a>
    </h1>
  
  








  


<time datetime="2009-06-20T00:00:00+01:00" pubdate data-updated="true">Jun 20<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>A new developer snapshot version of <a href="http://www.clutter-project.org">Clutter</a> has been released which is part of the journey towards Clutter 1.0. The project is an OpenGL renderer for user interfaces which uses the gobject base system.</p>

<p>The reason I post this though is that I have contributed (terribly minor) patches to this release. Plus also as part of the progress to 1.0 there are some very substantial changes under the hood. There is now a master clock for rendering which should improve rendering quality and smoothness. Also, beware, all units have been removed and it uses floating point values in the API now. There is some cool debugging features in the OpenGL wrapper part of Clutter so performance work can be done more easily.</p>

<p>You can see full release notes <a href="http://git.clutter-project.org/cgit.cgi?url=clutter/tree/NEWS">here</a>. The snapshot is available from git <a href="http://git.clutter-project.org/?url=clutter/tag/&amp;id=0.9.4">here</a>.</p>

<p>Now I need to build a deb so I can test this out a little more&#8230;.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/18/the-platform-is-the-hard-part/">The Platform Is the Hard Part</a>
    </h1>
  
  








  


<time datetime="2009-06-18T00:00:00+01:00" pubdate data-updated="true">Jun 18<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>Ubuntu is essentially a layer of abstraction on Debian providing additional stability and usability (niceties I would probably call them) in order to make a public release. Even with this additional layer of checking and development work it is targeted at a specific market and platform. It should work on all computers in a manner of speaking, and it is almost impossible to check all hardware combinations, let alone software packages.</p>

<p>Then you use this already abstracted layer as the basis for an even more specific &#8220;distribution&#8221;&#8230;. When you can limit your hardware targets, you then have to make sure the software is really performant and solid on it.</p>

<p>As the problems become smaller in the grand scheme of things, progress fixing them takes longer, seeming to almost grind to a halt. It also depends on the software you use which uncover bugs in seemingly unrelated libraries, drivers and processes. I&#8217;ve been encountering a lot of these, but this is the wonder of open-source. Solving all of these problems was possible with enough graft because all of the elements were available. This means identifying and communicating with the right communities, and then if you have any fixes getting your changes upstream into their repositories. The problem is though you still have to maintain your own patches because of the trickle down between distributions can take a very long time, and good changes rarely make it into already released software because of the big-bang big-release mentatility. As I have played more I find myself wishing for a rolling release distro&#8230;</p>

<p>But once you have your shiny platform all in place &#8211; how do you keep it up to date. You always find in the pursuit of getting it functioning you have to update manually&#8230;.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/17/efl-webkit-0-1-released/">EFL Webkit 0.1 Released</a>
    </h1>
  
  








  


<time datetime="2009-06-17T00:00:00+01:00" pubdate data-updated="true">Jun 17<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>The first version of <a href="http://www.webkit.org">Webkit</a> for <a href="http://www.enlightenment.org">EFL</a> has been <a href="http://tonikitoo.blogspot.com/2009/06/webkitefl-01-released.html">released</a>. I&#8217;ve been tracking the project for quite a while and it&#8217;ll be good to try it out again.</p>

<p>It has support for all the usual features for webkit and also now has plugin support for Flash. There is also a prototype browser called EVE. Internally it uses Cairo for the rendering and libcurl for the networking.</p>

<p>One of the things I really wanted to get round to ding at some point is trying out binding enlightenment (more specifically EFL) to a 3D surface in Clutter, because EFL is really good at 2D (and has plenty of backends) and Clutter is really good at 3D.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/14/xbmc-mythtv/">XBMC + MythTV</a>
    </h1>
  
  








  


<time datetime="2009-06-14T00:00:00+01:00" pubdate data-updated="true">Jun 14<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>If you want to watch TV from your <a href="http://xbmc.org/">XBMC</a> you can use <a href="http://code.google.com/p/mythbox/">mythbox</a> to use your XBMC installation as a frontend for MythTV.</p>

<p>What this does is allows you to watch live and time-shifted television as well as schedule recordings. MythTV is a bit of a pain to set up but once the backend is fully configured then you shouldn&#8217;t need to touch it. The best part for me was the web interface for scheduling recordings because it can show much more information than a TV interface would normally allow.</p>

<p>The quality of the XBMC frontend is much better than the default one that comes with MythTV (which I found counter-intuitive and lacking). The UI for mythbox integrates perfectly and formats everything professionally. The <a href="http://code.google.com/p/mythbox/wiki/Screenshots">screenshots</a> are pretty representative of what you get. There have been a few more beta releases since the one I used but even for pre-release software I found it good enough to use every day.</p>

<p>I used this combination for a while, and the only thing lacking for me was the hardware. Otherwise the experience was extremely good. Also don&#8217;t forget if you have nVidia graphics then you get VDPAU acceleration which meant my CPU was not really going much higher than 20%.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/13/its-aliiiive/">It&#8217;s Aliiiive!</a>
    </h1>
  
  








  


<time datetime="2009-06-13T00:00:00+01:00" pubdate data-updated="true">Jun 13<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>This poor corner of the Internet has been neglected of late, and it is almost time for me to renew my domain. So I have two options &#8211; let it die or pull my finger out and actually post some content. Inbetween <a href="http://www.camvine.com">work</a> and a new baby I find spare time a bit scarce (or non-existent).</p>

<p>But the doors won&#8217;t be shutting here because at some point the baby has to sleep at some point in the future and that means I get to use my laptop.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/13/intel-945gm-linux-drivers-uxa-and-memory-leaks/">Intel 945GM Linux Drivers &#8211; UXA and Memory Leaks</a>
    </h1>
  
  








  


<time datetime="2009-06-13T00:00:00+01:00" pubdate data-updated="true">Jun 13<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>One of the things I have been plugging away with at work is getting Intel 945GM graphics drivers working at their best. I was using 2.6 and 2.7 with the new UXA acceleration because it works really well with composite and xvideo.</p>

<p>The problem was there was a memory leak that you could drive a bus through. Because the Linux driver stack is so complex (Mesa, X Driver, X-server, kernel gubbins, the Direct Rendering Manager library) it was proving extremely difficult to find where the memory was going because it was still being used even when the process was closed.</p>

<p>With the code I was writing I found I could get the memory of the computer fully utilised in less than one hundred iterations. Luckily that meant I could write a <a href="http://lists.freedesktop.org/archives/intel-gfx/2009-May/002559.html">small test case</a>. The bug hit particularly hard in Moblin which relied on the Intel drivers and Clutter. At least five bugs in Freedesktop Bugzilla seem to report it, plenty in Launchpad, and several in Moblin.</p>

<p>As it turned out Shuang He of Intel diagnosed the root of the problem in the Mesa driver where pixmaps weren&#8217;t being released properly and has submitted <a href="http://lists.freedesktop.org/archives/intel-gfx/2009-June/002791.html">some patches</a> for that. The mesa patches have been applied if you use <a href="https://launchpad.net/~xorg-edgers/+archive/ppa">xorg-edgers</a> on Ubuntu which makes life a lot easier considering I spent four hours building my own fixed Mesa&#8230;</p>

<p>Not only this but there was a memory leak in Clutter (which I submitted patches for) which are now in their git master repository.</p>

<p>Now with both of those things fixed compositing windows using Clutter works brilliantly and will work for an extended period of time rather than falling over after a short time. Also if these patches are used on Moblin v2, you should get a better experience.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/13/intel-945gm-linux-drivers-the-good-bits/">Intel 945GM Linux Drivers &#8211; the Good Bits</a>
    </h1>
  
  








  


<time datetime="2009-06-13T00:00:00+01:00" pubdate data-updated="true">Jun 13<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>Using the latest Linux drivers for Intel 945GM are really, really good. The best drivers available for Linux displays in my humble opinion, especially since the deficiencies are more hardware related rather than the software.</p>

<p>Using the UXA acceleration you can even composite x-video windows in OpenGL. The 3D performance is impressive for such an old device and as of the end of last week xvmc was working as well with GEM. It uses the latest tech available in Linux display drivers like Kernel Mode Setting and DRI2 (which is a new interface for speaking to the kernel).</p>

<p>The latest drivers are also not only well capable of good compositing, but they are also capable of it without tearing, even with x-video surfaces. The actual rendering itself doesn&#8217;t tear any more thanks to people like <a href="http://virtuousgeek.org/blog/index.php/jbarnes">Jesse Barnes</a> who have put great effort into that work.</p>

<p>Since computers like netbooks/nettops are coming with the 945GM chipset, good support for it is essential. This is even better when it is open-source because you can help out with hackery and diagnosis (actually editing the code is very scary, but I tried a bit attempting to backport some changes to 2.7 because master was not stable enough at the time). It was a bit frustrating trying to balance performance, features and stability when deciding which driver version to finally run with, but I can see the driver is almost there with some minor stability work.</p>

<p>So I must say the guys have done really good work and 2.8 looks like it will be a really good release performance/feature-wise. I think I have wedged the hardware a few times, but I suppose the 2.7.99 releases are alpha, and also it is probably down to me hammering the graphics card.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/06/13/cluttered-mind/">Cluttered Mind</a>
    </h1>
  
  








  


<time datetime="2009-06-13T00:00:00+01:00" pubdate data-updated="true">Jun 13<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>Finally, I have contributed something back to an open-source project.</p>

<p>The memory leak in <a href="http://www.clutter-project.org">Clutter</a> I mentioned in a previous post has been fixed. I submitted the <a href="http://bugzilla.openedhand.com/show_bug.cgi?id=1640">patches</a> last week, and they got pushed onto master in time for Clutter 1.0.</p>

<p>I&#8217;ve been playing around with Clutter a bit more now and it is well inside the GTK+ comfort zone. I am really pleased I can contribute something useful to a project of this size because I am so used to using libraries but not actually fixing them. It&#8217;s the glory of open-source.</p>

<p>I&#8217;ve been playing around a little with Clutter 1.0 and its master clock based animation and it looks really interesting. Just be careful that some parameters are floats instead of ints now and this caused me to segfault.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2009/05/16/displaylink-open-source/">DisplayLink Open Source</a>
    </h1>
  
  








  


<time datetime="2009-05-16T00:00:00+01:00" pubdate data-updated="true">May 16<span>th</span>, 2009</time>
</div>

<div class="post-content"><p>Yesterday <a href="http://www.displaylink.com">Displaylink</a> released Linux source code for its USB display adapters. The project is LGPL and available on <a href="http://freedesktop.org">FreeDesktop</a>. The project itself is called libdlo and is available from <a href="http://freedesktop.org/wiki/Software/libdlo">this link</a> with the Git repository <a href="http://cgit.freedesktop.org/libdlo/">here</a>. You can see DisplayLink&#8217;s announcement <a href="http://www.displaylink.com/news/news150509.htm">here</a>.</p>

<p>At the moment it is a low-level library for speaking to the device and is not yet wrapped in a Xorg driver. The code itself supports ASIC devices and only the USB versions (if that means something to you then you have probably worked for DisplayLink at some point).</p>

<p>The code itself is impressively documented, and means people should be able to get something up and running pretty fast. I&#8217;m sure some interesting and exciting projects will come out of this.</p>

<p>Well done to DisplayLink on doing this &#8211; this is going to be a really good thing for getting content onto displays. USB is a really good solution &#8211; imagine daisy-chaining lots of displays controlled by a single computer.</p>
</div>
 </div>


<div id="pagination">
  
    <a class="prev" href="/blog/page/8/">&laquo;Previous</a>
  
  
    <a class="next" href="/blog/page/6/">Next&raquo;</a>
  
</div>
 </div>
    <div id="footer">
  <div class="panels">
    <div class="license">
      <h2>License</h2>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
    </div>

    <div class="posts">
      <h2>Recent Posts</h2>
      <ul>
        
          <li>
            <a href="/blog/2013/06/18/new-location-and-new-blog-engine-and-old-content-restored/">New Location &amp; New Blog Engine &amp; Old Content Restored</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/joining-microsoft/">Joining Microsoft</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/leaving-bromium/">Leaving Bromium</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/05/philip-su-engineering-process-and/">Philip Su - Engineering Process And Philosophy At Facebook</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/05/more-creator-owned-comics-genocide/">More Creator-Owned Comics - Genocide: Duostar</a>
          </li>
        
      </ul>
    </div>
  </div>

  <p class="powered">
    Powered by <a href="http://octopress.org">Octopress</a> and <a href="https://github.com/iwinux/compbits">Compbits</a>
  </p>
</div>

  </div> <!-- #wrapper end -->

  

  


  

  

  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
