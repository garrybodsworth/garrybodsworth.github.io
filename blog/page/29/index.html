
<!DOCTYPE HTML>
<html lang="en-gb">
<head>
  <meta charset="UTF-8">
  <title>Fragmented Memory</title>

  <meta name="author" content="Garry Bodsworth">
  
  <meta name="description" content="GUI Toolkits - Some Thoughts Oct 1st, 2007 I mentioned a couple of posts back that I was going to put some thought into GUI subjects and maybe &hellip;">
  
  

  <link rel="canonical" href="http://www.fragmentedmemory.com/blog/page/29">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Fragmented Memory" type="application/atom+xml">
</head>
  
<body class="default">
  <div id="wrapper">
    <div id="header">
  <h1><a href="/">Fragmented Memory</a></h1>
  
    <p>Garry Bodsworth's Blog (formerly Garry's Bit Patterns &amp; Programmer's Log)</p>
  
</div>
<ul id="social-links">
  
    <li><a class="feed" href="/atom.xml" title="RSS">RSS</a></li>
  
  
    <li><a class="twitter" href="http://twitter.com/garrybodsworth" title="Twitter">Twitter</a></li>
  
  
    <li> <a class="github" href="https://github.com/garrybodsworth" title="GitHub">GitHub</a> </li>
  
</ul>
<div class="clear"></div>
<ul id="nav">
  
    <li> <a href="/" class="current">blog</a> </li>
  

  
    <li><a href="/blog/archives">archives</a></li>
  

  
    <li><a href="/about">about</a></li>
  
</ul>

    <div id="main"> 

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/10/01/gui-toolkits-some-thoughts/">GUI Toolkits - Some Thoughts</a>
    </h1>
  
  








  


<time datetime="2007-10-01T19:57:00+01:00" pubdate data-updated="true">Oct 1<span>st</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
I mentioned a couple of posts back that I was going to put some thought into GUI subjects and maybe trying out writing a simple toolkit.<br /><br />I was thinking abut which way to jump with trying to write a toolkit.  First of all what should it be based on?  Should it just wrap Win32?  Cocoa?  Should it be entirely implemented on top of OpenGL from scratch?  Should it be cross-platform in design?  Just these questions could cause anyone to run away screaming.<br /><br />Thinking about building it on top of OpenGL I encountered a couple of interesting GUI libraries <a href="http://glui.sourceforge.net/">GLUI</a> and <a href="http://glow.sourceforge.net/">GLOW</a>.  In these projects the windows are completely rendered by OpenGL which is an interesting approach.  I suppose <a href="http://www.rawmaterialsoftware.com/juce/">Juce</a> is built from similar roots as well where it implements its own toolkits.<br /><br />I was thinking about writing a nice C++ wrapper for Win32 but then I started to think even Microsoft products don&#8217;t use the standard widget rendering.  Then you start to think about built in custom drawn widget rendering, then you think why are you using standard widgets&#8230;<br /><br />The whole idea about implementing a simple GUI toolkit is an education about the design decisions and pitfalls that you can get into.  You also need to decide which subset you decide to implement first.  The problem is most toolkits go for the same 10% and that is normally as far as they get.<br /><br />The main idea I want to try out for an experimental GUI toolkit is some DSL (domain specific language).  What I mean is embedding a language in C++ in order to implement the user interface in a readable fashion.  It is certainly possible using modern C++ idioms as demonstrated in Boost.  I suppose the type of thing I want to do is (in some kid of C++ like pseudo code):<br /><pre><br />dialog(...) +<br />widget<static>("Number", sizeX, sizeY) | widget<edit>(RESIZE_X) ||<br />widget<static>("Name", sizeX, sizeY)   | widget<edit>(RESIZE_X) ||<br />widget<list>("Blah", sizeX, sizeY, RESIZE_XY)<br />;<br />toolbar() +<br />button("image1", ...) |<br />button("image2", ...) |<br />separator() |<br />button("image3", ...) |<br />button("image4", ...)<br />;<br /></pre><br />Complete and utter insanity?  Probably, but could be fun to try out.  It would certainly be something different and would create a parallel in your source in comparison to what you would see on screen.  I don&#8217;t think anything quit like it has been tried before, so feel free to steal the idea - it would save me implementing it(!)<br /><br />Enough rambling for today I think&#8230;</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adi</div>
<div class='content'>
<a rel="external" href="http://orientinspiration.com/2009/09/oes-tsetnoc.html" rel="nofollow">Oes  Tsetnoc</a> one of the ways in which we can learn seo besides <a rel="external" href="http://duniasoer.com/archives/mengembalikan-jati-diri-bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a>.  By participating in the <a rel="external" href="http://mncmakina.com/2009/09/oes-tsetnoc-seo-contest/" rel="nofollow">Oes Tsetnoc</a> or <a rel="external" href="http://ulaznice.info/mengembalikan-jati-diri-bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> we can improve our seo skills. To find more information about <a rel="external" href="http://catatanblogger.info/738688-Oes-Tsetnoc.html" rel="nofollow">Oest Tsetnoc</a> please visit my <a rel="external" href="http://kusukaseo.info/981750-Oes-Tsetnoc-Support.html" rel="nofollow">Oes Tsetnoc</a> pages. And to find more information about <a rel="external" href="http://duniasoer.com" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> please visit my <a rel="external" href="http://catatanblogger.info/464655-Mengembalikan-Jati-Diri-Bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> pages. Thank you So much.<br> <a rel="external" href="http://orientinspiration.com" rel="nofollow">Oes  Tsetnoc</a> | <a rel="external" href="http://duniasoer.com/archives/semangat-mengembalikan-jati-diri-bangsa.html" rel="nofollow">Semangat Mengembalikan Jati Diri Bangsa</a></div>
</div>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
Hi Mark,<BR/><BR/>That looks realy interesting.<BR/><BR/>Thanks,<BR/>Garry</div>
</div>
<div class='comment'>
<div class='author'>Mark Dalgarno</div>
<div class='content'>
&#8220;The main idea I want to try out for an experimental GUI toolkit is some DSL (domain specific language).&#8221;<BR/><BR/>Hi Gary,<BR/><BR/>Don&#8217;t know if it&#8217;ll help but one of the speakers at my Code Generation 2007 conference ran a tutorial on Code Generation from Conceptual User Interface Patterns.<BR/><BR/>The PDF is available here:<BR/>http://www.codegeneration.net/cg2007/sessions/slides/CGfromCUIP.pdf and I can put you in touch with the speaker if you like.<BR/><BR/>Regards,<BR/>Mark Dalgarno<BR/><BR/>Writing (mainly) about software at The Variation Point:<BR/>http://blog.software-acumen.com/</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/10/01/one-year-old/">One Year Old</a>
    </h1>
  
  








  


<time datetime="2007-10-01T17:47:00+01:00" pubdate data-updated="true">Oct 1<span>st</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
It&#8217;s hard to believe this blog has been going for one year as of today.  I can&#8217;t believe I actually remembered this since I never managed to spot my 100th or 200th post.<br /><br />It has been quite a year really.  NC Graphics were taken over by PTC meaning I am now with a third employer working on the same codebase (in four separate stints).<br /><br />Certainly the most popular items on the blog have been the <a href="http://garrys-brain.blogspot.com/2007/07/tortoisesvn-and-visual-studio.html">TortoiseSVN and Visual Studio integration</a> and recently the <a href="http://garrys-brain.blogspot.com/2007/08/debugging-stlport-in-visual-studio.html">STLPort debugging in Visual Studio</a>.  Thanks to all the readers and all the comments.<br /><br />I would promise something for the next year or some manifesto, but if it is as action packed as the previous year I somehow doubt I will live up to it.  All I can promise is  if I learn anything interesting about computers I will share it with the rest of the Internet.<br /><br />Normal service will now resume.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Tabrez Iqbal</div>
<div class='content'>
I like your blog too. Few people post quality C++ articles like yours, so keep posting!</div>
</div>
<div class='comment'>
<div class='author'>shadone</div>
<div class='content'>
I want to say thanks for your postings! Your &#8220;STLport debugging&#8221; post inspired me to make the same debug formatters for Qt.</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/27/useful-tool-for-vs2005/">Useful Tools for VS2005</a>
    </h1>
  
  








  


<time datetime="2007-09-27T22:29:00+01:00" pubdate data-updated="true">Sep 27<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
Visual Studio 2005 provides a very decent IDE to work with (if you overlook the crashing and disappearing into black holes).  There hasn&#8217;t been much focus on the native C++ side of the IDE for a while, which means it does lack some useful features.<br /><br />One of those tools available for free on the internet is <a href="http://www.cupla.net/CodeWiz2/">CodeWiz2</a> providing a number of very quick and simple additions to the IDE which makes coding a bit easier.  Friend File lets you switch between header and implementation and Friend Member lets you switch between declaration and definition for a single function.  I did have a script that did it, but this works much better (and will at least work on Vista as well since the Macro Explorer was broken last time I tried).<br /><br />It is also scriptable in a manner of speaking meaning you can get common code structures or comments at the tap of a button.  Oh yeah, did I mention it is free?<br /><br />Another free tool available for Visual C++ is <a href="http://www.devexpress.com/Products/NET/IDETools/RefactorCPP/">Refactor!</a> which you will be surprised to hear offers refactoring for C++.  Only the simplest functionality is available in the free version but it is quite interesting.  I tend to refactor by hand myself, but one useful side-effect of this plug-in is when it highlights all instances of a variable which helps make the code a bit easier to navigate (and should really be a basic feature of the IDE).</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/26/gui-toolkits-forgotten-part-of-my-blog/">GUI Toolkits - the Forgotten Part of My Blog</a>
    </h1>
  
  








  


<time datetime="2007-09-26T20:59:00+01:00" pubdate data-updated="true">Sep 26<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
I have been doing this blog nearly a year now and certainly in 2007 I have neglected GUI coverage.  The main problem is that there hasn&#8217;t been a huge amount of impressive work on the open-source front and those libraries that showed the most promise are languishing in Sourceforge hell.<br /><br />Maybe Winforms has caught on big-style?  Maybe, but as far as I can tell when you get down to the OS level it still amounts to Win32 function calls, it is just the framework is built on top of that.  Also, many more applications can now be run as web-based applications, with its own plethora of GUI toolkits.<br /><br />Qt is obviously the leader but is only open-source for open-source applications unfortunately (and quite rightly as they do deserve to make money off it).  wxWidgets is not making as massive strides as many would have hoped in order to have really good looking native Windows applications.  The most recent substantial addition was wxAUI that added lots of good stuff like docking.  None of the ideas floating around Boost got off the ground unfortunately, and Win32GUI Generics and Notus and many others are mothballed.  Maybe there needs to be a &#8220;State Of The GUI Union&#8221; post&#8230;<br /><br />I am thinking of doing a small GUI toolkit just to test out the theories and get a better appreciation of the difficulties involved in design and implementation.  It would also mean I could play around with some of my memory allocation and multithreading ideas as part of it.  I&#8217;ve been trying to pull together as much information about Win32 as posible and I&#8217;ll definitely put them all together in one article.</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/26/accu-cambridge-talk-october/">ACCU Cambridge Talk - October</a>
    </h1>
  
  








  


<time datetime="2007-09-26T20:48:00+01:00" pubdate data-updated="true">Sep 26<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
It&#8217;s hard to believe it is nearly October.  The bad part is getting older, the better part though is that the ACCU talk is coming up.  See the website <a href="http://www.accu.org/index.php/accu_branches/accu_cambridge">here</a>.<br /><br />This month is about dynamic languages and is called <span style="font-weight:bold;">&#8220;Closing the Case for Groovy (and Ruby, and Python)&#8221;</span> by <a href="http://www.russel.org.uk/">Russel Winder</a>.  And apparently there will be a related <a href="http://www.pythonforrookies.org/">book</a> that may or may not be out in time for it.<br /><br />Hopefully the week after will have the first <a href="http://www.bcs-spa.org/cgi-bin/view/SPA/SPACambridgeEveningMeetingProgramme">BCS SPA Cambridge</a> meeting since the summer as well.</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/11/accu-cambridge-talk-missing-link/">ACCU Cambridge Talk - the Missing Link</a>
    </h1>
  
  








  


<time datetime="2007-09-11T19:14:00+01:00" pubdate data-updated="true">Sep 11<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
This month&#8217;s ACCU Cambridge &#8220;The Missing Link&#8221; talk was held at the <a href="http://www.displaylink.com/">DisplayLink</a> offices on the 6th of September.  Presenting the talk was Peter Smith who is part of the linker team at <a href="http://www.arm.com/">ARM</a>.<br /><br />The Missing Link talk was about the role of the linker in software development.  The talk detailed the history, the design of, and the use of linkers.  The talk was about an hour long but could easily have gone on longer.  Certainly from the tak I got the impression that the linker is a rather unloved part of the compilation process.  In fact there is really only one book about linkers called &#8220;Linkers and Loaders&#8221; which is available online from <a href="http://www.iecc.com/linker/">this link</a>.<br /><br />The talk itself was entertaining and was at a suitably high level for everyone to understand.   The actual architecture of compilation and linking really has not changed to much throughout its history.  Some of the more interesting parts of the talk were the discussions about name mangling and the reasoning behind it, and the caveats that need to be implemented to get around things like templates in C++.<br /><br />I think there is a plan for the slides to be available online via the <a href="http://www.accu.org">ACCU website</a>.<br /><br />As always though after the event you can learn lots more by going to the pub. A good turnout for the pub was the icing on the cake.<br /><br />The next talk will be about dynamic languages and will be held on the 4th October.  Keep an eye on the <a href="http://www.accu.org/index.php/accu_branches/accu_cambridge"></a>.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Kevin</div>
<div class='content'>
This comment has been removed by the author.</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/10/eastl-and-allocators/">EASTL and Allocators</a>
    </h1>
  
  








  


<time datetime="2007-09-10T21:51:00+01:00" pubdate data-updated="true">Sep 10<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
A few months back a document appeared on the Internet about <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2271.html">EASTL</a>.  It details alterations to the STL that Electronic Arts implemented (as well as their own version of the STL) to meet its requirements for standard containers and algorithms.  It has been published on the <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2363.html">C++ standardisation website</a> as a reference paper.<br /><br />Some of the ideas in it are very interesting and some are a little naive and lack generality, but the document itself is thoroughly worth it.  The main thrust of the document is efficiency in terms of memory and speed.  This amounts to better allocators, better control of low-level memory (alignment and so on) and intrusive type containers.<br /><br />It covers the deficiencies of std::allocator for EA&#8217;s requirements like the copy semantics and the lack of alignment controls.  It has got me thinking there is a lack of a generic allocator framework that makes it easier for writing pluggable allocators that could be thread local, or global, or thread-safe, or instance-based.  But I&#8217;ll come back to that later.<br /><br />vector bool is not a bit-based array but there is an implementation of a bitvector that gives the same behaviour.  That makes sense to me!<br /><br />The ability to resize a containers capacity to a smaller size and for the storage to respect that as most STL implementations do not do this.  Means memory can be returned back to the system.<br /><br />Apparently the implementation is easy to debug through a simple debugger with no overhead.  I don&#8217;t know whether that is the case in reality but it certainly has its appeal, but I&#8217;m sure it would make plenty of sense in open-source implementations meaning there would be more people able to contribute.<br /><br />Apparently some compilers struggle with inlining so the implementation reduces code complexity to allow less able compilers to inline more.<br /><br />A lot of the motivation behind this is cross-platform in nature and part of that is that the platforms can be limited in memory and processing power.  Some of the ideas brought up are possible in the current STL framework with some minor jumping through hoops, fortunately EA expended the manpower on implementing exactly what they want.<br /><br />Now back to the allocators&#8230;  The ideas make <a href="http://www.ogre3d.org/phpBB2/viewtopic.php?t=27220&postdays=0&postorder=asc&highlight=eastl&start=25"></a>a lot of sense in this document and I wonder how many are available to coders from the current STL framework.  One thing that requires clarity is what the alignment needs in order to align, by this I mean is it easily determined from the type you are using or is it a combination of that and the machine type.  If so some of the work could be done via type traits like those available through Boost.<br /><br />A lot of the allocator type suggestions do not even have an easy to use reference implementation in the open-source world.  Allocators are so important but there is a lack of availability of those apart from simple HOWTOs for writing allocators.<br /><br />This has got me thinking about actually writing some.  Coming up with a good framework has lead me to reading big stacks of articles online about allocators, and I think there is a good way forward but &#8216;ll leave that to another post.<br /><br />And there is some additional discussion on the Ogre forums <a href="http://www.ogre3d.org/phpBB2/viewtopic.php?t=35473&view=previous&sid=ce193664e1d3d7c4af509e6f4e2718c6">here</a> and <a href="http://www.ogre3d.org/phpBB2/viewtopic.php?p=225568&sid=ce193664e1d3d7c4af509e6f4e2718c6">here</a>.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Adi</div>
<div class='content'>
<a rel="external" href="http://orientinspiration.com/2009/09/oes-tsetnoc.html" rel="nofollow">Oes  Tsetnoc</a> one of the ways in which we can learn seo besides <a rel="external" href="http://duniasoer.com/archives/mengembalikan-jati-diri-bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a>.  By participating in the <a rel="external" href="http://mncmakina.com/2009/09/oes-tsetnoc-seo-contest/" rel="nofollow">Oes Tsetnoc</a> or <a rel="external" href="http://ulaznice.info/mengembalikan-jati-diri-bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> we can improve our seo skills. To find more information about <a rel="external" href="http://catatanblogger.info/738688-Oes-Tsetnoc.html" rel="nofollow">Oest Tsetnoc</a> please visit my <a rel="external" href="http://kusukaseo.info/981750-Oes-Tsetnoc-Support.html" rel="nofollow">Oes Tsetnoc</a> pages. And to find more information about <a rel="external" href="http://duniasoer.com" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> please visit my <a rel="external" href="http://catatanblogger.info/464655-Mengembalikan-Jati-Diri-Bangsa.html" rel="nofollow">Mengembalikan Jati Diri Bangsa</a> pages. Thank you So much.</div>
</div>
<div class='comment'>
<div class='author'>James</div>
<div class='content'>
Forgive the post necromancy, but on the topic of allocators, I thought I should point you to the <a href="http://heaplayers.org" rel="nofollow">HeapLayers project</a> and <a href="http://erdani.org/publications/cuj-2005-12.pdf" rel="nofollow">an associated paper</a> authored by Andrei Alexandrescu that describes the architecture. Interesting reading to be sure.</div>
</div>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
Perhaps naive is the wrong word.  I do wonder how much of the document is aimed at the lowest common denominator compiler, but I suppose the standards of implementation vary massively.<BR/><BR/>Looking at what the next C++ standard is proposing of which the EASTL documentation is informational for they all have a real world basis.  By that I mean almost all of the code and ideas have been tested in the open-source compilers (gcc) and libraries (Boost).  The change being effected on the C++ standard is being dictated by real code by real people.  If they wanted the ideas to become part of the standard it is unfortunate to say since it is proprietary code that some form of reference implementation for people to look at and evaluate.  Obviously there is lots of useful information as part of the document though.<BR/><BR/>EA are also a big organisation and surely can hold some sway with the compiler writers to help solve things like the template problems.  Going back to the compiler quality it is a shame that something like that would hold some better ideas back.<BR/><BR/>I completely forgot the fact that the allocators are not templated.  But I feel using template metaprogramming it must be possible to get more than enough information to construct an allocator that would work on the type traits of the type being allocated.  The platform information would also be required but that would depend which platform you are compiling for.  Maybe I am being naive or misunderstanding some of the theories used to determine type information at compile time.  Since this is done at compile time the efficiency should not take a hit, but maybe code size would.  I do feel that it must be possible to get the allocators to do most of what they want.  The STL is very generic and their use of iterators is a bit specialised.<BR/><BR/>Also things like debugging I have discovered with the very obscure implementation of STLPort you can access all the items with relative ease in Visual Studio.  I don&#8217;t know how many other debuggers have clever scripting languages though.  It is almost like solving a problem at the wrong stage of the process.<BR/><BR/>I do think C++ needs these types of open discussions generated from these types of document.  After all it is the only way any of us would learn.  I certainly wouldn&#8217;t pretend to know more than these guys because they would program me under the table.<BR/><BR/>I don&#8217;t know if I have justified my comments though ;)</div>
</div>
<div class='comment'>
<div class='author'>Paul</div>
<div class='content'>
Regarding the question of why you need alignment information about a type, EASTL allocators are not templated and thus don&#8217;t know what they are actually allocating. With std STL allocators are templates which are &#8216;re-bound&#8217; to the allocated type and allocator code can often use a compiler &#8220;alignof&#8221; extension to tell what the native alignment of the re-bound type (e.g. node) is.<BR/><BR/>Question: Do you feel that any parts of the EASTL document in particular seem naive?</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/09/04/upcoming-computing-talks-in-cambridge/">Upcoming Computing Talks in Cambridge</a>
    </h1>
  
  








  


<time datetime="2007-09-04T20:36:00+01:00" pubdate data-updated="true">Sep 4<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
There are a couple of talks coming up in Cambridge in the next couple of weeks.  We&#8217;re lucky here in Cambridge that there is anything like this to go to as I can&#8217;t find many instances of this throughout the country.<br /><br />First up we have <a href="http://accu.org">ACCU</a> a group striving for professionalism in programming (and there is a fair amount of emphasis on C++).  They have journals released regularly throughout the year which makes membership pretty worthwhile (also membership gives you access to the entire archive online).<br /><br />7:00pm Thursday 6th September 2007 - Peter Smith: The Missing Link, the role of a linker within a software development.  You can sign up to the talk at this <a href="http://www.accu.org/index.php/accu_branches/accu_cambridge">link</a>.<br /><br />Next up is the BCS SPA are going to start there monthly talk programme again after a summer break.  At the moment the talk next week is not known but you can keep an eye out <a href="http://www.bcs-spa.org/cgi-bin/view/SPA/SPACambridgeEveningMeetingProgramme">here</a>.<br /><br />Interestingly there will be a talk from <a href="http://www.interact-sw.co.uk/iangblog/">Ian Griffiths</a> about WPF (Windows Presentation Foundation) on the 14th November.  He is one of the architects behind the whole new graphics interface in Vista.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
I&#8217;ve put up a review of the recent ACCU talk about linkers.  The ACCU talks are definitely the most interesting since they are more technical in nature.<BR/><BR/>The first I&#8217;ve heard of this PTC event was from you just now(!)  I notice there is no mention of Pro/TOOLMAKER&#8230;  I don&#8217;t think developers are part of this event.</div>
</div>
<div class='comment'>
<div class='author'>goatchurch</div>
<div class='content'>
You&#8217;ve got to tell us how were those talks, and if there are any I should be going to?  Also, are you going to this thing &#8216;ere which appears to have showed up in my spam folder:<BR/><BR/>http://www.ptcworld.org/uki/</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/08/30/visual-studio-2005-autoexpdat-for/">Visual Studio 2005 autoexp.dat for STLPort Debugging</a>
    </h1>
  
  








  


<time datetime="2007-08-30T22:44:00+01:00" pubdate data-updated="true">Aug 30<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
From the contents of <a href="http://garrys-brain.blogspot.com/2007/08/debugging-stlport-in-visual-studio.html">my previous post</a> I have created an autoexp.dat for download (Visual Studio 2005 only).  <a href="http://garry.bodsworth.googlepages.com/autoexp.zip">You can get it here</a>.<br /><br />Simply copy the extracted file into <span style="font-weight:bold;">C:\Program Files\Microsoft Visual Studio 8\Common7\Packages\Debugger</span><br /><br />Visual Studio 2008 will work if you follow the instructions in my previous post but the autoexp.dat is a bit different between versions.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
I am using 5.1.3.  I haven&#8217;t looked at 5.1.4 yet, but I didn&#8217;t think the release notes suggested anything major.<BR/><BR/>I know that certainly with older versions it is completely different because of the use of the &#8220;priv&#8221; namespace.<BR/><BR/>Garry</div>
</div>
<div class='comment'>
<div class='author'>jean-gab</div>
<div class='content'>
This used to work for me until I upgraded to 5.1.4. Can you please tell me which version of STLport you&#8217;re running?<BR/><BR/>Thanks!</div>
</div>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
Glad you have found it useful.  The map took quite a lot of tweaking to make it work on the code I had written to test it.<BR/><BR/>The STLPort map item pointers seem to be a pair{T1, T2} but it is cast to one pointer.<BR/><BR/>The good thing about this ability to visualise means the only reason to switch to the Microsoft STL is gone ;)</div>
</div>
<div class='comment'>
<div class='author'>Kevin</div>
<div class='content'>
This post was very useful to me. I was considering using the Microsoft STL during debug so that I would have the visualizers available. Now I won&#8217;t have to suffer through that! Unfortunately, I was unable to get the map visualizer to work properly, but I am sure that with some tinkering that will be resolved.</div>
</div>
</div>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2007/08/30/debugging-stlport-in-visual-studio/">Debugging STLPort in Visual Studio - autoexp.dat</a>
    </h1>
  
  








  


<time datetime="2007-08-30T22:28:00+01:00" pubdate data-updated="true">Aug 30<span>th</span>, 2007</time>
</div>

<div class="post-content"><div class='post'>
We use <a href="http://stlport.sourceforge.net/">STLPort</a> for our C++ standard library as it is substantially faster than the one supplied with Visual Studio 2005.  I  have expended quite a lot of energy trying to get the Microsoft STL to speed up more, with custom allocators and the suchlike.  The reason I pursued it was to make debugging easier as there was no way (by default) to look inside the containers in a structured fashion.<br /><br />Then I realised I was approaching the problem from the wrong angle.  Perhaps Visual Studio allows us to customise the debugging visualisations, and that means using STLPort with all the debugging benefits of the in-built system.  This was where I discovered the <a href="http://www.developer.com/net/cplus/article.php/3509761">autoexp.dat</a> which is more or less undocumented by Microsoft.  The system allows you to create custom visualisers for any datatype in the debugger.  Unfortunately it requires arcane rituals to make it work and I believe the format may have changed for VS2005.<br /><br />Anyway on to the meat of this post!  I will post here the code you need to visualise map, vector, set, and list in Visual Studio 2005.  First go and open <span style="font-weight:bold;">C:\Program Files\Microsoft Visual Studio 8\Common7\Packages\Debugger\autoexp.dat</span> in a text editor.  Locate the line featuring the text <span style="font-weight:bold;">PROPVARIANT</span>.  Just above that line add the following:<br /><pre><br />;------------------------------------------------------------------------------<br />;  STLPORT visualisers<br />;------------------------------------------------------------------------------<br /><br />;------------------------------------------------------------------------------<br /><br />;  stlp_std::vector<br />;------------------------------------------------------------------------------<br />stlp_std::vector<*>{<br />    children<br />    (<br />        #array<br />        (<br />            expr :    ($c._M_start)[$i], <br /><br />            size :    $c._M_finish-$c._M_start<br />        )<br />    )<br />   <br />    preview<br />    (<br />        #(<br />            "[",<br />            $e._M_finish - $e._M_start ,<br />            "](",<br /><br />           <br />            #array<br />            (<br />                expr :     ($c._M_start)[$i], <br />                size :     $c._M_finish-$c._M_start<br />            ),<br />            ")"<br />        )<br /><br />    )<br />}<br /><br />;------------------------------------------------------------------------------<br />;  stlp_std::list<br />;------------------------------------------------------------------------------<br />stlp_std::list<*,*>{<br /><br />    children<br />    (<br />        #list<br />        (<br />         head : $c._M_node._M_data._M_next,<br />         skip : &($c._M_node._M_data),<br />         next : _M_next<br />        ) : #( *($T1 *)(sizeof(stlp_std::priv::_List_node_base)+((char*)&($e))) )<br /><br />    )<br />   <br />    preview<br />    (<br />     #(<br />      "(",<br />      #list<br />      (<br />       head : $c._M_node._M_data._M_next,<br />       skip : &($c._M_node._M_data),<br />       next : _M_next<br />      ) : *($T1 *)(sizeof(stlp_std::priv::_List_node_base)+((char*)&($e))),<br /><br />      ")"<br />     )<br />    )<br />}<br /><br />;------------------------------------------------------------------------------<br />;  stlp_std::set<br />;------------------------------------------------------------------------------<br /><br />stlp_std::set<*> {<br /> children<br /> (<br />  #tree<br />  (<br />   head : $c._M_t._M_header._M_data._M_parent,<br />   skip : $c._M_t._M_header._M_data,<br />   left : _M_left,<br />   right : _M_right,<br />   size : $c._M_t._M_node_count<br /><br />  ) : ((_Node*)(&$e))->_M_value_field<br /> )<br />}<br /><br />;------------------------------------------------------------------------------<br />;  stlp_std::map<br />;------------------------------------------------------------------------------<br /><br />stlp_std::map<*,*,*,*> {<br /> children<br /> (<br />  #(<br />   [map]: [$c,!],<br /><br />   #tree<br />   (<br />    head : $c._M_t._M_header._M_data._M_parent,<br />    left : _M_left,<br />    right : _M_right,<br />    skip : $c._M_t._M_header._M_data<br /><br />   ) : *(stlp_std::pair<$T1,$T2>*)(((char*)(&((*((stlp_std::priv::_Rb_tree_node<$T1>*)(&$e)))._M_value_field))))<br />  )<br /> )<br />}<br /></pre><br /><br />I am pretty sure I need to do some more tweaking to get it working even better.  The map implementation is certainly the best part as it displays the list of items as pairs of (key, value) which is really useful.  Some of the code for this was pilfered from the comments of <a href="http://www.virtualdub.org/blog/pivot/entry.php?id=120">this article</a> - thanks to those people who blazed the initial trail.</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Leviana</div>
<div class='content'>
Can I apply debugging on my <a href="http://www.rxsexual.com/" rel="nofollow">Buy Generic Viagra</a> blog ?</div>
</div>
<div class='comment'>
<div class='author'>Zahary Karadjov</div>
<div class='content'>
A more complete set of visualizers is  now available at:<BR/>http://stlport.svn.sourceforge.net/viewvc/stlport/trunk/STLport/etc/autoexp.dat?revision=HEAD</div>
</div>
<div class='comment'>
<div class='author'>Laurent</div>
<div class='content'>
I was using your file as a starting point, trying to improve it for other types. My Stlport setup is different than yours, it does not as use a stlp_std::priv:: namespace.  <BR/>Note that the STLPort namespace can be one of stlpdmtx_std, stlpd_std, stlpdxmtx_std, stlpdx_std too.<BR/><BR/><BR/>Maybe my setup is wrong, I am still using VS2005 without the SP1 and my STLPort is quite outdated (5.0.2). I will upgrade this week and see if things goes better. <BR/><BR/><BR/>In case you need it, this is my test file:<BR/><BR/>#include &lt;map&gt;<BR/>#include &lt;set&gt;<BR/>#include &lt;list&gt;<BR/>#include &lt;vector&gt;<BR/>#include &lt;string&gt;<BR/><BR/>using namespace std;<BR/><BR/>int main(){<BR/><BR/> _Rb_tree_node&lt;int&gt; rb_t_n_int;<BR/> rb_t_n_int._M_value_field = 4;<BR/> _Rb_tree_node&lt;string&gt; rb_t_n_string;<BR/> rb_t_n_string._M_value_field = &#8220;four&#8221;;<BR/><BR/> string s(&#8220;some string&#8221;);<BR/><BR/> pair&lt;int, int &gt; pii;<BR/> pair&lt;int, string &gt; pis;<BR/> pair&lt;string, string &gt; pss;<BR/> pair&lt;string, int &gt; psi;<BR/><BR/> map&lt;int, int &gt; mii;<BR/> map&lt;int, string &gt; mis;<BR/> map&lt;string, string &gt; mss;<BR/> map&lt;string, int &gt; msi;<BR/> map&lt;double, double&gt; mdd;<BR/> set&lt;int&gt; si;<BR/> set&lt;string&gt; ss;<BR/> list&lt;int&gt; li;<BR/> list&lt;string&gt; ls;<BR/> vector&lt;int&gt; vi;<BR/> vector&lt;string&gt; vs;<BR/><BR/> vector&lt;vector&lt;string&gt; &gt; v_vs;<BR/> map&lt;string, vector&lt;string&gt; &gt; ms_vs;<BR/><BR/> set&lt; vector&lt;int&gt; &gt; s_vi;<BR/> set&lt; vector&lt;string&gt; &gt; s_vs;<BR/><BR/> pii.first = 1;<BR/> pii.second = 2;<BR/> pis.first = 1;<BR/> pis.second = &#8220;two&#8221;;<BR/> pss.first = &#8220;one&#8221;;<BR/> pss.second = &#8220;two&#8221;;<BR/> psi.first = &#8220;one&#8221;;<BR/> psi.second = 2;<BR/><BR/> mii.insert(make_pair(1, 10));<BR/> mii.insert(make_pair(2, 20));<BR/> mii.insert(make_pair(3, 30));<BR/> mii.insert(make_pair(4, 40));<BR/> <BR/> mis.insert(make_pair(1, &#8220;one&#8221;));<BR/> mis.insert(make_pair(2, &#8220;two&#8221;));<BR/> mis.insert(make_pair(3, &#8220;three&#8221;));<BR/> mis.insert(make_pair(4, &#8220;four&#8221;));<BR/> <BR/> mss.insert(make_pair(&#8220;one&#8221;, &#8220;one&#8221;));<BR/> mss.insert(make_pair(&#8220;two&#8221;, &#8220;two&#8221;));<BR/> mss.insert(make_pair(&#8220;three&#8221;, &#8220;three&#8221;));<BR/> mss.insert(make_pair(&#8220;four&#8221;, &#8220;four&#8221;));<BR/><BR/> msi.insert(make_pair(&#8220;one&#8221;, 1));<BR/> msi.insert(make_pair(&#8220;two&#8221;, 2));<BR/> msi.insert(make_pair(&#8220;three&#8221;, 3));<BR/> msi.insert(make_pair(&#8220;four&#8221;, 4));<BR/><BR/> mdd.insert(make_pair(1.1, 11.1));<BR/> mdd.insert(make_pair(2.2, 22.2));<BR/> mdd.insert(make_pair(3.3, 33.3));<BR/> mdd.insert(make_pair(4.4, 44.4));<BR/><BR/> si.insert(1);<BR/> si.insert(2);<BR/> si.insert(3);<BR/> si.insert(4);<BR/><BR/> ss.insert(&#8220;one&#8221;);<BR/> ss.insert(&#8220;two&#8221;);<BR/> ss.insert(&#8220;three&#8221;);<BR/> ss.insert(&#8220;four&#8221;);<BR/><BR/> li.push_back(1);<BR/> li.push_back(2);<BR/> li.push_back(3);<BR/> li.push_back(4);<BR/><BR/> ls.push_back(&#8220;one&#8221;);<BR/> ls.push_back(&#8220;two&#8221;);<BR/> ls.push_back(&#8220;three&#8221;);<BR/> ls.push_back(&#8220;four&#8221;);<BR/><BR/> vi.push_back(1);<BR/> vi.push_back(2);<BR/> vi.push_back(3);<BR/> vi.push_back(4);<BR/><BR/> vs.push_back(&#8220;one&#8221;);<BR/> vs.push_back(&#8220;two&#8221;);<BR/> vs.push_back(&#8220;three&#8221;);<BR/> vs.push_back(&#8220;four&#8221;);<BR/><BR/> v_vs.push_back(vs);<BR/> v_vs.resize(2);<BR/> v_vs[1].push_back(&#8220;one&#8221;);<BR/> v_vs[1].push_back(&#8220;two&#8221;);<BR/> v_vs[1].push_back(&#8220;three&#8221;);<BR/> v_vs[1].push_back(&#8220;four&#8221;);<BR/><BR/> ms_vs.insert(make_pair(&#8220;fr&#8221;, vs));<BR/> ms_vs.insert(make_pair(&#8220;en&#8221;, v_vs[1]));<BR/><BR/> s_vi.insert(vi);<BR/> s_vs.insert(vs);<BR/>}</div>
</div>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
I misinterpreted what you said.  The one I supplied only works for you with map{int, int} right?<BR/><BR/>That is odd because I have had maps of complex types to complex types visualise in list form with this visualiser.  I&#8217;ll have a closer look at it over the next week.</div>
</div>
<div class='comment'>
<div class='author'>Garry Bodsworth</div>
<div class='content'>
I started with an ugly hack like that before using the map implementation in the post above.  Does my implementation work for you.<BR/><BR/>The solution really came down to understanding what STLPort was doing with its pointers and then interpreting those into the proper structures/classes by casting.<BR/><BR/>You can copy and paste my implementation above in, it looks like it is truncated but all of the text for the visualiser is on the page.</div>
</div>
<div class='comment'>
<div class='author'>Laurent</div>
<div class='content'>
My map visualizer looks like this, but it doesn&#8217;t work for every container:<BR/> map&lt;string,int&gt; or map&lt;int,int&gt; is ok but <BR/><BR/>map&lt;int, string&gt; or map&lt;string,string&gt; is not! <BR/><BR/>Any idea ?<BR/><BR/>stlp_std::map&lt;*,*,*,*&gt; {<BR/> children<BR/> (<BR/>  #(<BR/>   [map]: [$c,!],<BR/>   #tree<BR/>   (<BR/>    head : $c._M_t._M_header._M_data._M_parent,<BR/>    left : _M_left,<BR/>    right : _M_right,<BR/>    skip : $c._M_t._M_header._M_data<BR/><BR/>   ) : #( *(stlp_std::pair&lt;$T1,$T2&gt; *)(sizeof(stlp_std::_Rb_tree_node_base)+((char*)&($e))) ) ; this is an ugly hack that works for ( map&lt;string,int&gt;, map&lt;int,int&gt;, map&lt;double,double&gt; ) but not for map&lt;int,string&gt;, map&lt;string,string&gt; &#8230; )<BR/> ;  : *(stlp_std::pair&lt;$T1,$T2&gt;*)(((char*)(&((*((stlp_std::_Rb_tree_node&lt;$T1&gt;*)(&$e)))._M_value_field))))  ;   works only for map&lt;int,int&gt;<BR/>  )<BR/> )</div>
</div>
</div>
</div>
 </div>


<div id="pagination">
  
    <a class="prev" href="/blog/page/30/">&laquo;Previous</a>
  
  
    <a class="next" href="/blog/page/28/">Next&raquo;</a>
  
</div>
 </div>
    <div id="footer">
  <div class="panels">
    <div class="license">
      <h2>License</h2>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
    </div>

    <div class="posts">
      <h2>Recent Posts</h2>
      <ul>
        
          <li>
            <a href="/blog/2013/06/18/new-location-and-new-blog-engine-and-old-content-restored/">New Location &amp; New Blog Engine &amp; Old Content Restored</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/joining-microsoft/">Joining Microsoft</a>
          </li>
        
          <li>
            <a href="/blog/2013/06/13/leaving-bromium/">Leaving Bromium</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/05/philip-su-engineering-process-and/">Philip Su - Engineering Process And Philosophy At Facebook</a>
          </li>
        
          <li>
            <a href="/blog/2013/03/05/more-creator-owned-comics-genocide/">More Creator-Owned Comics - Genocide: Duostar</a>
          </li>
        
      </ul>
    </div>
  </div>

  <p class="powered">
    Powered by <a href="http://octopress.org">Octopress</a> and <a href="https://github.com/iwinux/compbits">Compbits</a>
  </p>
</div>

  </div> <!-- #wrapper end -->

  

  


  

  

  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
